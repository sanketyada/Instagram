<% include ./partials/header.ejs %>

<div class="w-full min-h-screen bg-black px-4 py-4 pb-24">

  <!-- Search Bar -->
  <div class="sticky top-0 z-40 bg-black pb-3">
    <div class="flex items-center gap-2 border border-zinc-800 px-3 py-2 rounded-xl">
      <i class="ri-search-line text-zinc-400"></i>
      <input
        id="inputuser"
        class="w-full bg-black outline-none text-sm text-zinc-200 placeholder-zinc-500"
        type="text"
        placeholder="Search"
      />
    </div>
  </div>

  <!-- Result Area -->
  <div class="users mt-4 space-y-4"></div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"
  integrity="sha512-b94Z6431JyXY14iSXwgzeZurHHRNkLt9d6bAHt7BZT38eqV+GyngIi/tVye4jBKPYQ2lBdRs0glww4fmpuLRwA=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  const inp = document.querySelector("#inputuser")

  inp.addEventListener("input", () => {
    let clutter = ""

    axios.get(`/username/${inp.value}`)
      .then((Account) => {
        Account.data.forEach((item) => {
          clutter += `
            <a href="/profile" class="block">
              <div class="flex items-center gap-3 px-2 py-2 rounded-lg hover:bg-zinc-900 transition">
                <div class="w-12 h-12 rounded-full overflow-hidden bg-zinc-800">
                  <img
                    class="w-full h-full object-cover"
                    src="${item.profileImg}"
                  />
                </div>
                <div class="leading-tight">
                  <h3 class="text-sm font-semibold text-white">${item.username}</h3>
                  <h4 class="text-xs text-zinc-500">${item.name}</h4>
                </div>
              </div>
            </a>
          `
        })

        document.querySelector(".users").innerHTML = clutter
      })
  })
</script>

<% include ./partials/footer.ejs %>
